(function() {var h=null;
(function(){function j(a){this.d=a;this.f=[]}function f(a){this.d=a;this.t=!1;this.q=[];this.o=[]}function m(a,b,c){this.d=a;this.u=b;this.n=c}function g(a){this.e=a}function d(a){this.e=a;this.N=!1;this.a=[];this.p=0;this.g=[]}var k={VERSION:"1.0.0.rc1",compile:function(a){return(new d(a)).b()},precompile:function(a){return(new d(a)).c()}};d.prototype.b=function(){this.s();var a=this.M();return function(b,c){return e.A(a,b,c)}};d.prototype.c=function(){this.s();return["function(d, i){","\tvar r = ["+
this.L().toString()+"];","\treturn DubStash.Runtime.renderTemplate(r, d, i);\n}"].join("\n")};d.prototype.M=function(){var a=[],b;for(b in this.g)a.push(this.g[b].b());return a};d.prototype.L=function(){var a=[],b;for(b in this.g)a.push(this.g[b].c());return a};d.prototype.s=function(){if(!this.N){d.h.lastIndex=0;for(var a;(a=d.h.exec(this.e))!==h;)if(a[1].length===a[4].length){var b;this.j(a);switch(a[2]){case "if":a[3]?(a=new f(a[3]),this.i(a),this.a.push(a)):l.log("Bad condition: "+a[0]);break;
case "foreach":a[3]&&(a=new j(a[3]),this.i(a),this.a.push(a));break;case "else":b=!1;if(this.a.length){var c=this.a[this.a.length-1];c instanceof f?c.K():b=!0}else b=!0;b&&(this.j(a[0]),l.log("Unexpected {{else}} encountered!"));break;case "end":b=!1;this.a.length?a[3]&&(c=this.a[this.a.length-1],b="if"===a[3]?!(c instanceof f):"foreach"===a[3]?!(c instanceof j):!0):b=!0;b?(this.j(a[0]),l.log("Unexpected {{end}} encountered!")):this.a.pop();break;default:a=new m(a[2],"/r"===a[3],2===a[1].length),
this.i(a)}}else l.log("Unbalanced brackets encountered: "+a[0]);a=[];a.index=this.e.length;this.j(a);this.a.length&&l.log("Missing {{end}}!")}};d.prototype.j=function(a){a="string"===typeof a?a:this.e.slice(this.p,a.index);a.length?this.i(new g(a)):this.p=d.h.lastIndex};d.prototype.i=function(a){this.a.length?this.a[this.a.length-1].r(a):this.g.push(a);this.p=d.h.lastIndex};d.h=/({{2,3})\s*([^}\s]+)\s*([^}]*)?(}{2,3})/g;g.prototype.b=function(){var a=this.e;return function(){return a}};g.prototype.c=
function(){return["function(){",'\treturn "'+this.O(this.e)+'";',"}"].join("\n")};g.D=/"/g;g.H=/\r?\n/g;g.C=/\\/g;g.prototype.O=function(a){return a.replace(g.C,"\\\\").replace(g.D,'\\"').replace(g.H,"\\n")};m.prototype.b=function(){var a=this;return function(b,c){return e.z(a.d,a.u,a.n,b,c)}};m.prototype.c=function(){return["function(d, i){","\treturn DubStash.Runtime.renderPlaceHolderBlock("+['"'+this.d+'"',this.u,this.n].join(", ")+", d, i);","}"].join("\n")};f.prototype.K=function(){this.t=!0};
f.prototype.r=function(a){(this.t?this.o:this.q).push(a)};f.prototype.b=function(){var a=this.d,b=this.l(this.q),c=this.l(this.o);return function(n,d){return e.v(a,b,c,n,d)}};f.prototype.c=function(){return["function(d, i){",'\tvar n = "'+this.d+'";',"\tvar t = ["+this.k(this.q).toString()+"];","\tvar f = ["+this.k(this.o).toString()+"];","\treturn DubStash.Runtime.renderConditionBlock(n, t, f, d, i);\n}"].join("\n")};f.prototype.l=function(a){var b=[],c;for(c in a)b.push(a[c].b());return b};f.prototype.k=
function(a){var b=[],c;for(c in a)b.push(a[c].c());return b};j.prototype.b=function(){var a=this;return function(b,c){return e.w(a.d,a.l(),b,c)}};j.prototype.c=function(){return["function(d, i){",'\tvar n = "'+this.d+'";',"\tvar s = ["+this.k().toString()+"];","\treturn DubStash.Runtime.renderIteratorBlock(n, s, d, i);\n}"].join("\n")};j.prototype.r=function(a){this.f.push(a)};j.prototype.l=function(){var a=[],b;for(b in this.f)a.push(this.f[b].b());return a};j.prototype.k=function(){var a=[],b;for(b in this.f)a.push(this.f[b].c());
return a};var e={A:function(a,b,c){var e=[],d;for(d in a)e.push(a[d].call(h,b,c));return e.join("")},z:function(a,b,c,d,g){var f=e.m(a,d);if(g&&void 0===f)return c?"{{"+a+"}}":"{{{"+a+"}}}";if(void 0===f||f===h)return"";a=c?e.n(""+f):""+f;b&&-1!==a.indexOf("{{")&&(a=k.compile(a).call(h,d,g));return a},v:function(a,b,c,d,f){a=e.m(a,d)?b:c;b=[];for(var g in a)b.push(a[g].call(h,d,f));return b.join("")},w:function(a,b,c,d){a=e.m(a,c);var f=[];a&&this.J(a,function(a){for(var c in b)f.push(b[c].call(h,
a,d))});return f.join("")},m:function(a,b){var c=a.indexOf(".");if(0<c&&c<a.length-1){var d=a.slice(0,c);if(d in b)return e.m(a.slice(c+1),b[d])}else{c="function"===typeof b[a]?b[a]():b[a];if("object"===typeof c){if(c instanceof Array)return c.length?c:h;for(d in c)return c;return h}return c}},J:function(a,b){if("function"===typeof a.forEach)a.forEach(b);else if("object"===typeof a)for(var c in a)b.call(this,a[c]);else b.call(this,a)},n:function(a){return a.replace(e.B,"&amp;").replace(e.G,"&lt;").replace(e.F,
"&gt;").replace(e.I,"&quot;")},G:/</g,F:/>/g,B:/&/g,I:/\"/g},l=function(){return this.console||console}();k.Runtime||(k.Runtime=e,e.renderTemplate=e.A,e.renderPlaceHolderBlock=e.z,e.renderConditionBlock=e.v,e.renderIteratorBlock=e.w);this.DubStash=k;try{module.exports=k}catch(p){}})();})();
