(function(){function g(a){this.e=a;this.p=!1;this.n=[];this.k=[]}function k(a,b,e){this.e=a;this.s=b;this.i=e}function f(a){this.d=a}function c(a){this.d=a;this.K=!1;this.a=[];this.m=0;this.f=[]}var h={compile:function(a){return(new c(a)).b()},precompile:function(a){return(new c(a)).c()}};c.prototype.b=function(){this.o();var a=this.J();return function(b,e){return d.v(a,b,e)}};c.prototype.c=function(){this.o();return["function(d, i){","\tvar r = ["+this.I().toString()+"];","\treturn DubStash.Runtime.renderTemplate(r, d, i);\n}"].join("\n")};
c.prototype.J=function(){var a=[],b;for(b in this.f)a.push(this.f[b].b());return a};c.prototype.I=function(){var a=[],b;for(b in this.f)a.push(this.f[b].c());return a};c.prototype.o=function(){if(!this.K){c.g.lastIndex=0;for(var a;null!==(a=c.g.exec(this.d));)if(a[1].length===a[4].length)switch(this.h(a),a[2]){case "if":a[3]?(a=new g(a[3]),this.j(a),this.a.push(a)):j.log("Bad condition: "+a[0]);break;case "else":this.a.length?this.a[this.a.length-1].H():(this.h(a[0]),j.log("Unexpected {{else}} encountered!"));
break;case "endif":this.a.length?this.a.pop():(this.h(a[0]),j.log("Unexpected {{endif}} encountered!"));break;default:a=new k(a[2],"/r"===a[3],2===a[1].length),this.j(a)}else j.log("Unbalanced brackets encountered: "+a[0]);a=[];a.index=this.d.length;this.h(a);this.a.length&&j.log("Missing {{endif}}!")}};c.prototype.h=function(a){a="string"===typeof a?a:this.d.slice(this.m,a.index);a.length?this.j(new f(a)):this.m=c.g.lastIndex};c.prototype.j=function(a){this.a.length?this.a[this.a.length-1].G(a):
this.f.push(a);this.m=c.g.lastIndex};c.g=/({{2,3})\s*([^}\s]+)\s*([^}]*)?(}{2,3})/g;f.prototype.b=function(){var a=this.d;return function(){return a}};f.prototype.c=function(){return["function(){",'\treturn "'+this.L(this.d)+'";',"}"].join("\n")};f.A=/"/g;f.D=/\r?\n/g;f.z=/\\/g;f.prototype.L=function(a){return a.replace(f.z,"\\\\").replace(f.A,'\\"').replace(f.D,"\\n")};k.prototype.b=function(){var a=this;return function(b,e){return d.u(a.e,a.s,a.i,b,e)}};k.prototype.c=function(){return["function(d, i){",
"\treturn DubStash.Runtime.renderPlaceHolderBlock("+['"'+this.e+'"',this.s,this.i].join(", ")+", d, i);","}"].join("\n")};g.prototype.H=function(){this.p=!0};g.prototype.G=function(a){(this.p?this.k:this.n).push(a)};g.prototype.b=function(){var a=this.e,b=this.r(this.n),e=this.r(this.k);return function(c,f){return d.t(a,b,e,c,f)}};g.prototype.c=function(){return["function(d, i){",'\tvar n = "'+this.e+'";',"\tvar t = ["+this.q(this.n).toString()+"];","\tvar f = ["+this.q(this.k).toString()+"];","\treturn DubStash.Runtime.renderConditionBlock(n, t, f, d, i);\n}"].join("\n")};
g.prototype.r=function(a){var b=[],e;for(e in a)b.push(a[e].b());return b};g.prototype.q=function(a){var b=[],e;for(e in a)b.push(a[e].c());return b};var d={v:function(a,b,e){var d=[],c;for(c in a)d.push(a[c].call(null,b,e));return d.join("")},u:function(a,b,e,c,f){var g=d.l(a,c);if(f&&void 0===g)return e?"{{"+a+"}}":"{{{"+a+"}}}";if(void 0===g||null===g)return"";a=e?d.i(""+g):""+g;b&&-1!==a.indexOf("{{")&&(a=h.compile(a).call(null,c,f));return a},t:function(a,b,e,c,f){a=d.l(a,c)?b:e;b=[];for(var g in a)b.push(a[g].call(null,
c,f));return b.join("")},l:function(a,b){var c=a.indexOf(".");if(0<c&&c<a.length-1){var f=a.slice(0,c);if(f in b)return d.l(a.slice(c+1),b[f])}else return"function"===typeof b[a]?b[a]():b[a]},i:function(a){return a.replace(d.w,"&amp;").replace(d.C,"&lt;").replace(d.B,"&gt;").replace(d.F,"&quot;")},C:/</g,B:/>/g,w:/&/g,F:/\"/g},j=function(){return this.console||console}();h.Runtime||(h.Runtime=d,d.renderTemplate=d.v,d.renderPlaceHolderBlock=d.u,d.renderConditionBlock=d.t);this.DubStash=h;try{module.exports=
h}catch(l){}})();
